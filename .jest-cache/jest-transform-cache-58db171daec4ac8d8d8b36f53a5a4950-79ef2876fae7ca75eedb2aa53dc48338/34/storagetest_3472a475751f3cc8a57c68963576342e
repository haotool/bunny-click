cc601ae42cf4b3862f1a9c2da7b7d559
"use strict";

/**
 * 儲存系統測試
 * 測試 StorageAdapter、LocalStorageAdapter、IndexedDBAdapter 和 GameStorage
 * 
 * @author haotool
 * @version 7.2.3
 * @created 2025-08-18T02:39:58+08:00
 */

const {
  StorageAdapter,
  GameStorage
} = require('../storage/adapter.js');
const {
  LocalStorageAdapter
} = require('../storage/localStorage.js');
const {
  IndexedDBAdapter
} = require('../storage/indexedDB.js');

// Mock IndexedDB for testing
global.indexedDB = require('fake-indexeddb');
global.IDBKeyRange = require('fake-indexeddb/lib/FDBKeyRange');
describe('StorageAdapter', () => {
  let storageAdapter;
  beforeEach(async () => {
    // 清理 localStorage
    localStorage.clear();

    // 建立測試用適配器
    storageAdapter = new StorageAdapter({
      debug: true,
      dbName: 'TestDB',
      version: 1
    });
    await storageAdapter.init();
  });
  afterEach(async () => {
    if (storageAdapter) {
      await storageAdapter.clear();
    }
  });
  describe('基本操作', () => {
    test('應該能儲存和讀取字串資料', async () => {
      const key = 'test-string';
      const value = 'Hello World';
      await storageAdapter.setItem(key, value);
      const result = await storageAdapter.getItem(key);
      expect(result).toBe(value);
    });
    test('應該能儲存和讀取物件資料', async () => {
      const key = 'test-object';
      const value = {
        name: 'Bunny Click',
        version: '7.2.3',
        features: ['PWA', 'Offline', 'Multi-touch']
      };
      await storageAdapter.setItem(key, value);
      const result = await storageAdapter.getItem(key);
      expect(result).toEqual(value);
    });
    test('應該能儲存和讀取數組資料', async () => {
      const key = 'test-array';
      const value = [1, 2, 3, 'test', {
        nested: true
      }];
      await storageAdapter.setItem(key, value);
      const result = await storageAdapter.getItem(key);
      expect(result).toEqual(value);
    });
    test('讀取不存在的鍵應該返回 null', async () => {
      const result = await storageAdapter.getItem('non-existent-key');
      expect(result).toBeNull();
    });
    test('應該能移除資料', async () => {
      const key = 'test-remove';
      const value = 'to be removed';
      await storageAdapter.setItem(key, value);
      expect(await storageAdapter.getItem(key)).toBe(value);
      await storageAdapter.removeItem(key);
      expect(await storageAdapter.getItem(key)).toBeNull();
    });
    test('應該能清空所有資料', async () => {
      const keys = ['key1', 'key2', 'key3'];
      const values = ['value1', 'value2', 'value3'];

      // 儲存多筆資料
      for (let i = 0; i < keys.length; i++) {
        await storageAdapter.setItem(keys[i], values[i]);
      }

      // 驗證資料存在
      for (let i = 0; i < keys.length; i++) {
        expect(await storageAdapter.getItem(keys[i])).toBe(values[i]);
      }

      // 清空所有資料
      await storageAdapter.clear();

      // 驗證資料已被清空
      for (const key of keys) {
        expect(await storageAdapter.getItem(key)).toBeNull();
      }
    });
  });
  describe('進階功能', () => {
    test('應該能獲取所有鍵名', async () => {
      const testData = {
        'game:score': 100,
        'game:settings': {
          sound: true
        },
        'user:name': 'Player1'
      };
      for (const [key, value] of Object.entries(testData)) {
        await storageAdapter.setItem(key, value);
      }
      const keys = await storageAdapter.keys();
      for (const key of Object.keys(testData)) {
        expect(keys).toContain(key);
      }
    });
    test('應該能獲取儲存項目數量', async () => {
      const testKeys = ['test1', 'test2', 'test3'];

      // 初始大小應為 0
      expect(await storageAdapter.size()).toBe(0);

      // 逐一加入資料
      for (let i = 0; i < testKeys.length; i++) {
        await storageAdapter.setItem(testKeys[i], `value${i}`);
        expect(await storageAdapter.size()).toBe(i + 1);
      }
    });
    test('應該能獲取適配器資訊', () => {
      const info = storageAdapter.getAdapterInfo();
      expect(info).toHaveProperty('primary');
      expect(info).toHaveProperty('fallback');
      expect(info).toHaveProperty('isInitialized');
      expect(info).toHaveProperty('config');
      expect(info.isInitialized).toBe(true);
    });
  });
  describe('TTL 過期機制', () => {
    beforeEach(() => {
      jest.useFakeTimers();
    });
    afterEach(() => {
      jest.runOnlyPendingTimers();
      jest.useRealTimers();
    });
    test('資料應該在 TTL 過期後自動移除', async () => {
      const key = 'test-ttl';
      const value = 'will expire';
      const ttl = 100; // 100ms

      await storageAdapter.setItem(key, value, {
        ttl
      });

      // 立即讀取應該成功
      expect(await storageAdapter.getItem(key)).toBe(value);

      // 推進時間到過期後
      jest.advanceTimersByTime(ttl + 50);

      // 過期後讀取應該返回 null
      expect(await storageAdapter.getItem(key)).toBeNull();
    });
  });
  describe('錯誤處理', () => {
    test('應該處理無效的 JSON 資料', async () => {
      // 直接在 localStorage 中設定無效 JSON
      const key = storageAdapter.primaryAdapter.getFullKey('invalid-json');
      localStorage.setItem(key, 'invalid json data');
      const result = await storageAdapter.getItem('invalid-json');
      expect(result).toBeNull();
    });
  });
});
describe('GameStorage', () => {
  let gameStorage;
  let storageAdapter;
  beforeEach(async () => {
    localStorage.clear();
    storageAdapter = new StorageAdapter({
      debug: true,
      dbName: 'GameTestDB',
      version: 1
    });
    await storageAdapter.init();
    gameStorage = new GameStorage(storageAdapter);
  });
  afterEach(async () => {
    if (storageAdapter) {
      await storageAdapter.clear();
    }
  });
  describe('遊戲設定', () => {
    test('應該能儲存和讀取遊戲設定', async () => {
      const settings = {
        soundEnabled: false,
        vibrationEnabled: true,
        effectsEnabled: false,
        theme: 'dark'
      };
      await gameStorage.saveSettings(settings);
      const result = await gameStorage.getSettings();
      expect(result).toMatchObject(settings);
    });
    test('應該提供預設設定', async () => {
      const settings = await gameStorage.getSettings();
      expect(settings).toHaveProperty('soundEnabled');
      expect(settings).toHaveProperty('vibrationEnabled');
      expect(settings).toHaveProperty('effectsEnabled');
      expect(settings).toHaveProperty('theme');

      // 預設值
      expect(settings.soundEnabled).toBe(true);
      expect(settings.vibrationEnabled).toBe(true);
      expect(settings.effectsEnabled).toBe(true);
      expect(settings.theme).toBe('auto');
    });
  });
  describe('最高分記錄', () => {
    test('應該能儲存和讀取最高分', async () => {
      const mode = 'single-30s';
      const score = 150;
      const tps = 25.5;
      await gameStorage.saveHighScore(mode, score, tps);
      const result = await gameStorage.getHighScore(mode);
      expect(result).toMatchObject({
        score,
        tps,
        timestamp: expect.any(Number),
        date: expect.any(String)
      });
    });
    test('不存在的模式應該返回 null', async () => {
      const result = await gameStorage.getHighScore('non-existent-mode');
      expect(result).toBeNull();
    });
  });
  describe('遊戲歷史', () => {
    test('應該能儲存遊戲歷史', async () => {
      const gameData = {
        mode: 'single',
        duration: 30000,
        score: 120,
        peakTPS: 30,
        averageTPS: 20
      };
      await gameStorage.saveGameHistory(gameData);
      const history = await gameStorage.getGameHistory();
      expect(history).toHaveLength(1);
      expect(history[0]).toMatchObject({
        ...gameData,
        id: expect.any(Number),
        timestamp: expect.any(Number)
      });
    });
    test('應該限制歷史記錄數量', async () => {
      // 新增超過限制的記錄
      for (let i = 0; i < 105; i++) {
        await gameStorage.saveGameHistory({
          mode: 'test',
          duration: 1000,
          score: i,
          peakTPS: i,
          averageTPS: i
        });
      }
      const history = await gameStorage.getGameHistory();
      expect(history.length).toBeLessThanOrEqual(100);

      // 應該保留最新的記錄
      expect(history[0].score).toBe(104);
    });
    test('空歷史應該返回空陣列', async () => {
      const history = await gameStorage.getGameHistory();
      expect(history).toEqual([]);
    });
  });
  describe('資料管理', () => {
    test('應該能清空遊戲資料', async () => {
      // 新增各種遊戲資料
      await gameStorage.saveSettings({
        soundEnabled: false
      });
      await gameStorage.saveHighScore('single', 100, 20);
      await gameStorage.saveGameHistory({
        mode: 'single',
        duration: 30000,
        score: 100,
        peakTPS: 20,
        averageTPS: 15
      });

      // 確認資料存在
      expect(await gameStorage.getSettings()).toMatchObject({
        soundEnabled: false
      });
      expect(await gameStorage.getHighScore('single')).not.toBeNull();
      expect(await gameStorage.getGameHistory()).toHaveLength(1);

      // 清空遊戲資料
      await gameStorage.clearGameData();

      // 確認資料已清空
      expect(await gameStorage.getSettings()).toMatchObject({
        soundEnabled: true
      }); // 預設值
      expect(await gameStorage.getHighScore('single')).toBeNull();
      expect(await gameStorage.getGameHistory()).toEqual([]);
    });
  });
});
describe('LocalStorageAdapter', () => {
  let adapter;
  beforeEach(() => {
    localStorage.clear();
    adapter = new LocalStorageAdapter({
      debug: true,
      dbName: 'TestLS'
    });
  });
  afterEach(async () => {
    if (adapter) {
      await adapter.clear();
    }
  });
  test('應該檢測到 LocalStorage 可用性', () => {
    expect(adapter.isAvailable).toBe(true);
  });
  test('應該正確生成完整鍵名', () => {
    const key = 'testKey';
    const fullKey = adapter.getFullKey(key);
    expect(fullKey).toBe('TestLS:testKey');
  });
  test('應該能獲取使用統計', async () => {
    await adapter.init();

    // 新增一些測試資料
    await adapter.setItem('test1', 'value1');
    await adapter.setItem('test2', {
      complex: 'object'
    });
    const stats = await adapter.getStats();
    expect(stats).toHaveProperty('itemCount');
    expect(stats).toHaveProperty('totalSize');
    expect(stats).toHaveProperty('formattedSize');
    expect(stats).toHaveProperty('usagePercentage');
    expect(stats.itemCount).toBe(2);
    expect(stats.totalSize).toBeGreaterThan(0);
  });
});
describe('整合測試', () => {
  test('StorageAdapter 應該在 IndexedDB 失敗時回退到 LocalStorage', async () => {
    // Mock IndexedDB 失敗
    const originalIndexedDB = global.indexedDB;
    global.indexedDB = undefined;
    const adapter = new StorageAdapter({
      preferredStorage: 'indexeddb',
      debug: true
    });
    await adapter.init();

    // 確認使用 LocalStorage
    const info = adapter.getAdapterInfo();
    expect(info.primary).toBe('LocalStorageAdapter');

    // 測試基本功能
    await adapter.setItem('fallback-test', 'works');
    const result = await adapter.getItem('fallback-test');
    expect(result).toBe('works');

    // 還原
    global.indexedDB = originalIndexedDB;
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJTdG9yYWdlQWRhcHRlciIsIkdhbWVTdG9yYWdlIiwicmVxdWlyZSIsIkxvY2FsU3RvcmFnZUFkYXB0ZXIiLCJJbmRleGVkREJBZGFwdGVyIiwiZ2xvYmFsIiwiaW5kZXhlZERCIiwiSURCS2V5UmFuZ2UiLCJkZXNjcmliZSIsInN0b3JhZ2VBZGFwdGVyIiwiYmVmb3JlRWFjaCIsImxvY2FsU3RvcmFnZSIsImNsZWFyIiwiZGVidWciLCJkYk5hbWUiLCJ2ZXJzaW9uIiwiaW5pdCIsImFmdGVyRWFjaCIsInRlc3QiLCJrZXkiLCJ2YWx1ZSIsInNldEl0ZW0iLCJyZXN1bHQiLCJnZXRJdGVtIiwiZXhwZWN0IiwidG9CZSIsIm5hbWUiLCJmZWF0dXJlcyIsInRvRXF1YWwiLCJuZXN0ZWQiLCJ0b0JlTnVsbCIsInJlbW92ZUl0ZW0iLCJrZXlzIiwidmFsdWVzIiwiaSIsImxlbmd0aCIsInRlc3REYXRhIiwic291bmQiLCJPYmplY3QiLCJlbnRyaWVzIiwidG9Db250YWluIiwidGVzdEtleXMiLCJzaXplIiwiaW5mbyIsImdldEFkYXB0ZXJJbmZvIiwidG9IYXZlUHJvcGVydHkiLCJpc0luaXRpYWxpemVkIiwiamVzdCIsInVzZUZha2VUaW1lcnMiLCJydW5Pbmx5UGVuZGluZ1RpbWVycyIsInVzZVJlYWxUaW1lcnMiLCJ0dGwiLCJhZHZhbmNlVGltZXJzQnlUaW1lIiwicHJpbWFyeUFkYXB0ZXIiLCJnZXRGdWxsS2V5IiwiZ2FtZVN0b3JhZ2UiLCJzZXR0aW5ncyIsInNvdW5kRW5hYmxlZCIsInZpYnJhdGlvbkVuYWJsZWQiLCJlZmZlY3RzRW5hYmxlZCIsInRoZW1lIiwic2F2ZVNldHRpbmdzIiwiZ2V0U2V0dGluZ3MiLCJ0b01hdGNoT2JqZWN0IiwibW9kZSIsInNjb3JlIiwidHBzIiwic2F2ZUhpZ2hTY29yZSIsImdldEhpZ2hTY29yZSIsInRpbWVzdGFtcCIsImFueSIsIk51bWJlciIsImRhdGUiLCJTdHJpbmciLCJnYW1lRGF0YSIsImR1cmF0aW9uIiwicGVha1RQUyIsImF2ZXJhZ2VUUFMiLCJzYXZlR2FtZUhpc3RvcnkiLCJoaXN0b3J5IiwiZ2V0R2FtZUhpc3RvcnkiLCJ0b0hhdmVMZW5ndGgiLCJpZCIsInRvQmVMZXNzVGhhbk9yRXF1YWwiLCJub3QiLCJjbGVhckdhbWVEYXRhIiwiYWRhcHRlciIsImlzQXZhaWxhYmxlIiwiZnVsbEtleSIsImNvbXBsZXgiLCJzdGF0cyIsImdldFN0YXRzIiwiaXRlbUNvdW50IiwidG90YWxTaXplIiwidG9CZUdyZWF0ZXJUaGFuIiwib3JpZ2luYWxJbmRleGVkREIiLCJ1bmRlZmluZWQiLCJwcmVmZXJyZWRTdG9yYWdlIiwicHJpbWFyeSJdLCJzb3VyY2VzIjpbInN0b3JhZ2UudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIOWEsuWtmOezu+e1sea4rOipplxuICog5ris6KmmIFN0b3JhZ2VBZGFwdGVy44CBTG9jYWxTdG9yYWdlQWRhcHRlcuOAgUluZGV4ZWREQkFkYXB0ZXIg5ZKMIEdhbWVTdG9yYWdlXG4gKiBcbiAqIEBhdXRob3IgaGFvdG9vbFxuICogQHZlcnNpb24gNy4yLjNcbiAqIEBjcmVhdGVkIDIwMjUtMDgtMThUMDI6Mzk6NTgrMDg6MDBcbiAqL1xuXG5jb25zdCB7IFN0b3JhZ2VBZGFwdGVyLCBHYW1lU3RvcmFnZSB9ID0gcmVxdWlyZSgnLi4vc3RvcmFnZS9hZGFwdGVyLmpzJyk7XG5jb25zdCB7IExvY2FsU3RvcmFnZUFkYXB0ZXIgfSA9IHJlcXVpcmUoJy4uL3N0b3JhZ2UvbG9jYWxTdG9yYWdlLmpzJyk7XG5jb25zdCB7IEluZGV4ZWREQkFkYXB0ZXIgfSA9IHJlcXVpcmUoJy4uL3N0b3JhZ2UvaW5kZXhlZERCLmpzJyk7XG5cbi8vIE1vY2sgSW5kZXhlZERCIGZvciB0ZXN0aW5nXG5nbG9iYWwuaW5kZXhlZERCID0gcmVxdWlyZSgnZmFrZS1pbmRleGVkZGInKTtcbmdsb2JhbC5JREJLZXlSYW5nZSA9IHJlcXVpcmUoJ2Zha2UtaW5kZXhlZGRiL2xpYi9GREJLZXlSYW5nZScpO1xuXG5kZXNjcmliZSgnU3RvcmFnZUFkYXB0ZXInLCAoKSA9PiB7XG4gIGxldCBzdG9yYWdlQWRhcHRlcjtcbiAgXG4gIGJlZm9yZUVhY2goYXN5bmMgKCkgPT4ge1xuICAgIC8vIOa4heeQhiBsb2NhbFN0b3JhZ2VcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICBcbiAgICAvLyDlu7rnq4vmuKzoqabnlKjpganphY3lmahcbiAgICBzdG9yYWdlQWRhcHRlciA9IG5ldyBTdG9yYWdlQWRhcHRlcih7XG4gICAgICBkZWJ1ZzogdHJ1ZSxcbiAgICAgIGRiTmFtZTogJ1Rlc3REQicsXG4gICAgICB2ZXJzaW9uOiAxXG4gICAgfSk7XG4gICAgXG4gICAgYXdhaXQgc3RvcmFnZUFkYXB0ZXIuaW5pdCgpO1xuICB9KTtcbiAgXG4gIGFmdGVyRWFjaChhc3luYyAoKSA9PiB7XG4gICAgaWYgKHN0b3JhZ2VBZGFwdGVyKSB7XG4gICAgICBhd2FpdCBzdG9yYWdlQWRhcHRlci5jbGVhcigpO1xuICAgIH1cbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+WfuuacrOaTjeS9nCcsICgpID0+IHtcbiAgICB0ZXN0KCfmh4noqbLog73lhLLlrZjlkozoroDlj5blrZfkuLLos4fmlpknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSAndGVzdC1zdHJpbmcnO1xuICAgICAgY29uc3QgdmFsdWUgPSAnSGVsbG8gV29ybGQnO1xuICAgICAgXG4gICAgICBhd2FpdCBzdG9yYWdlQWRhcHRlci5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3RvcmFnZUFkYXB0ZXIuZ2V0SXRlbShrZXkpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlKHZhbHVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ+aHieipsuiDveWEsuWtmOWSjOiugOWPlueJqeS7tuizh+aWmScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9ICd0ZXN0LW9iamVjdCc7XG4gICAgICBjb25zdCB2YWx1ZSA9IHtcbiAgICAgICAgbmFtZTogJ0J1bm55IENsaWNrJyxcbiAgICAgICAgdmVyc2lvbjogJzcuMi4zJyxcbiAgICAgICAgZmVhdHVyZXM6IFsnUFdBJywgJ09mZmxpbmUnLCAnTXVsdGktdG91Y2gnXVxuICAgICAgfTtcbiAgICAgIFxuICAgICAgYXdhaXQgc3RvcmFnZUFkYXB0ZXIuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHN0b3JhZ2VBZGFwdGVyLmdldEl0ZW0oa2V5KTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9FcXVhbCh2YWx1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCfmh4noqbLog73lhLLlrZjlkozoroDlj5bmlbjntYTos4fmlpknLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBrZXkgPSAndGVzdC1hcnJheSc7XG4gICAgICBjb25zdCB2YWx1ZSA9IFsxLCAyLCAzLCAndGVzdCcsIHsgbmVzdGVkOiB0cnVlIH1dO1xuICAgICAgXG4gICAgICBhd2FpdCBzdG9yYWdlQWRhcHRlci5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3RvcmFnZUFkYXB0ZXIuZ2V0SXRlbShrZXkpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b0VxdWFsKHZhbHVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ+iugOWPluS4jeWtmOWcqOeahOmNteaHieipsui/lOWbniBudWxsJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgc3RvcmFnZUFkYXB0ZXIuZ2V0SXRlbSgnbm9uLWV4aXN0ZW50LWtleScpO1xuICAgICAgZXhwZWN0KHJlc3VsdCkudG9CZU51bGwoKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ+aHieipsuiDveenu+mZpOizh+aWmScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9ICd0ZXN0LXJlbW92ZSc7XG4gICAgICBjb25zdCB2YWx1ZSA9ICd0byBiZSByZW1vdmVkJztcbiAgICAgIFxuICAgICAgYXdhaXQgc3RvcmFnZUFkYXB0ZXIuc2V0SXRlbShrZXksIHZhbHVlKTtcbiAgICAgIGV4cGVjdChhd2FpdCBzdG9yYWdlQWRhcHRlci5nZXRJdGVtKGtleSkpLnRvQmUodmFsdWUpO1xuICAgICAgXG4gICAgICBhd2FpdCBzdG9yYWdlQWRhcHRlci5yZW1vdmVJdGVtKGtleSk7XG4gICAgICBleHBlY3QoYXdhaXQgc3RvcmFnZUFkYXB0ZXIuZ2V0SXRlbShrZXkpKS50b0JlTnVsbCgpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgn5oeJ6Kmy6IO95riF56m65omA5pyJ6LOH5paZJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3Qga2V5cyA9IFsna2V5MScsICdrZXkyJywgJ2tleTMnXTtcbiAgICAgIGNvbnN0IHZhbHVlcyA9IFsndmFsdWUxJywgJ3ZhbHVlMicsICd2YWx1ZTMnXTtcbiAgICAgIFxuICAgICAgLy8g5YSy5a2Y5aSa562G6LOH5paZXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXdhaXQgc3RvcmFnZUFkYXB0ZXIuc2V0SXRlbShrZXlzW2ldLCB2YWx1ZXNbaV0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDpqZforYnos4fmlpnlrZjlnKhcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwga2V5cy5sZW5ndGg7IGkrKykge1xuICAgICAgICBleHBlY3QoYXdhaXQgc3RvcmFnZUFkYXB0ZXIuZ2V0SXRlbShrZXlzW2ldKSkudG9CZSh2YWx1ZXNbaV0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyDmuIXnqbrmiYDmnInos4fmlplcbiAgICAgIGF3YWl0IHN0b3JhZ2VBZGFwdGVyLmNsZWFyKCk7XG4gICAgICBcbiAgICAgIC8vIOmpl+itieizh+aWmeW3suiiq+a4heepulxuICAgICAgZm9yIChjb25zdCBrZXkgb2Yga2V5cykge1xuICAgICAgICBleHBlY3QoYXdhaXQgc3RvcmFnZUFkYXB0ZXIuZ2V0SXRlbShrZXkpKS50b0JlTnVsbCgpO1xuICAgICAgfVxuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn6YCy6ZqO5Yqf6IO9JywgKCkgPT4ge1xuICAgIHRlc3QoJ+aHieipsuiDveeNsuWPluaJgOaciemNteWQjScsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHRlc3REYXRhID0ge1xuICAgICAgICAnZ2FtZTpzY29yZSc6IDEwMCxcbiAgICAgICAgJ2dhbWU6c2V0dGluZ3MnOiB7IHNvdW5kOiB0cnVlIH0sXG4gICAgICAgICd1c2VyOm5hbWUnOiAnUGxheWVyMSdcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKHRlc3REYXRhKSkge1xuICAgICAgICBhd2FpdCBzdG9yYWdlQWRhcHRlci5zZXRJdGVtKGtleSwgdmFsdWUpO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBrZXlzID0gYXdhaXQgc3RvcmFnZUFkYXB0ZXIua2V5cygpO1xuICAgICAgXG4gICAgICBmb3IgKGNvbnN0IGtleSBvZiBPYmplY3Qua2V5cyh0ZXN0RGF0YSkpIHtcbiAgICAgICAgZXhwZWN0KGtleXMpLnRvQ29udGFpbihrZXkpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGVzdCgn5oeJ6Kmy6IO9542y5Y+W5YSy5a2Y6aCF55uu5pW46YePJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgdGVzdEtleXMgPSBbJ3Rlc3QxJywgJ3Rlc3QyJywgJ3Rlc3QzJ107XG4gICAgICBcbiAgICAgIC8vIOWIneWni+Wkp+Wwj+aHieeCuiAwXG4gICAgICBleHBlY3QoYXdhaXQgc3RvcmFnZUFkYXB0ZXIuc2l6ZSgpKS50b0JlKDApO1xuICAgICAgXG4gICAgICAvLyDpgJDkuIDliqDlhaXos4fmlplcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGVzdEtleXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgYXdhaXQgc3RvcmFnZUFkYXB0ZXIuc2V0SXRlbSh0ZXN0S2V5c1tpXSwgYHZhbHVlJHtpfWApO1xuICAgICAgICBleHBlY3QoYXdhaXQgc3RvcmFnZUFkYXB0ZXIuc2l6ZSgpKS50b0JlKGkgKyAxKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRlc3QoJ+aHieipsuiDveeNsuWPlumBqemFjeWZqOizh+ioiicsICgpID0+IHtcbiAgICAgIGNvbnN0IGluZm8gPSBzdG9yYWdlQWRhcHRlci5nZXRBZGFwdGVySW5mbygpO1xuICAgICAgXG4gICAgICBleHBlY3QoaW5mbykudG9IYXZlUHJvcGVydHkoJ3ByaW1hcnknKTtcbiAgICAgIGV4cGVjdChpbmZvKS50b0hhdmVQcm9wZXJ0eSgnZmFsbGJhY2snKTtcbiAgICAgIGV4cGVjdChpbmZvKS50b0hhdmVQcm9wZXJ0eSgnaXNJbml0aWFsaXplZCcpO1xuICAgICAgZXhwZWN0KGluZm8pLnRvSGF2ZVByb3BlcnR5KCdjb25maWcnKTtcbiAgICAgIGV4cGVjdChpbmZvLmlzSW5pdGlhbGl6ZWQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUVEwg6YGO5pyf5qmf5Yi2JywgKCkgPT4ge1xuICAgIGJlZm9yZUVhY2goKCkgPT4ge1xuICAgICAgamVzdC51c2VGYWtlVGltZXJzKCk7XG4gICAgfSk7XG5cbiAgICBhZnRlckVhY2goKCkgPT4ge1xuICAgICAgamVzdC5ydW5Pbmx5UGVuZGluZ1RpbWVycygpO1xuICAgICAgamVzdC51c2VSZWFsVGltZXJzKCk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCfos4fmlpnmh4noqbLlnKggVFRMIOmBjuacn+W+jOiHquWLleenu+mZpCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IGtleSA9ICd0ZXN0LXR0bCc7XG4gICAgICBjb25zdCB2YWx1ZSA9ICd3aWxsIGV4cGlyZSc7XG4gICAgICBjb25zdCB0dGwgPSAxMDA7IC8vIDEwMG1zXG4gICAgICBcbiAgICAgIGF3YWl0IHN0b3JhZ2VBZGFwdGVyLnNldEl0ZW0oa2V5LCB2YWx1ZSwgeyB0dGwgfSk7XG4gICAgICBcbiAgICAgIC8vIOeri+WNs+iugOWPluaHieipsuaIkOWKn1xuICAgICAgZXhwZWN0KGF3YWl0IHN0b3JhZ2VBZGFwdGVyLmdldEl0ZW0oa2V5KSkudG9CZSh2YWx1ZSk7XG4gICAgICBcbiAgICAgIC8vIOaOqOmAsuaZgumWk+WIsOmBjuacn+W+jFxuICAgICAgamVzdC5hZHZhbmNlVGltZXJzQnlUaW1lKHR0bCArIDUwKTtcbiAgICAgIFxuICAgICAgLy8g6YGO5pyf5b6M6K6A5Y+W5oeJ6Kmy6L+U5ZueIG51bGxcbiAgICAgIGV4cGVjdChhd2FpdCBzdG9yYWdlQWRhcHRlci5nZXRJdGVtKGtleSkpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfpjK/oqqTomZXnkIYnLCAoKSA9PiB7XG4gICAgdGVzdCgn5oeJ6Kmy6JmV55CG54Sh5pWI55qEIEpTT04g6LOH5paZJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g55u05o6l5ZyoIGxvY2FsU3RvcmFnZSDkuK3oqK3lrprnhKHmlYggSlNPTlxuICAgICAgY29uc3Qga2V5ID0gc3RvcmFnZUFkYXB0ZXIucHJpbWFyeUFkYXB0ZXIuZ2V0RnVsbEtleSgnaW52YWxpZC1qc29uJyk7XG4gICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShrZXksICdpbnZhbGlkIGpzb24gZGF0YScpO1xuICAgICAgXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdG9yYWdlQWRhcHRlci5nZXRJdGVtKCdpbnZhbGlkLWpzb24nKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCdHYW1lU3RvcmFnZScsICgpID0+IHtcbiAgbGV0IGdhbWVTdG9yYWdlO1xuICBsZXQgc3RvcmFnZUFkYXB0ZXI7XG4gIFxuICBiZWZvcmVFYWNoKGFzeW5jICgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICBcbiAgICBzdG9yYWdlQWRhcHRlciA9IG5ldyBTdG9yYWdlQWRhcHRlcih7XG4gICAgICBkZWJ1ZzogdHJ1ZSxcbiAgICAgIGRiTmFtZTogJ0dhbWVUZXN0REInLFxuICAgICAgdmVyc2lvbjogMVxuICAgIH0pO1xuICAgIFxuICAgIGF3YWl0IHN0b3JhZ2VBZGFwdGVyLmluaXQoKTtcbiAgICBnYW1lU3RvcmFnZSA9IG5ldyBHYW1lU3RvcmFnZShzdG9yYWdlQWRhcHRlcik7XG4gIH0pO1xuICBcbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICBpZiAoc3RvcmFnZUFkYXB0ZXIpIHtcbiAgICAgIGF3YWl0IHN0b3JhZ2VBZGFwdGVyLmNsZWFyKCk7XG4gICAgfVxuICB9KTtcblxuICBkZXNjcmliZSgn6YGK5oiy6Kit5a6aJywgKCkgPT4ge1xuICAgIHRlc3QoJ+aHieipsuiDveWEsuWtmOWSjOiugOWPlumBiuaIsuioreWumicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNldHRpbmdzID0ge1xuICAgICAgICBzb3VuZEVuYWJsZWQ6IGZhbHNlLFxuICAgICAgICB2aWJyYXRpb25FbmFibGVkOiB0cnVlLFxuICAgICAgICBlZmZlY3RzRW5hYmxlZDogZmFsc2UsXG4gICAgICAgIHRoZW1lOiAnZGFyaydcbiAgICAgIH07XG4gICAgICBcbiAgICAgIGF3YWl0IGdhbWVTdG9yYWdlLnNhdmVTZXR0aW5ncyhzZXR0aW5ncyk7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBnYW1lU3RvcmFnZS5nZXRTZXR0aW5ncygpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b01hdGNoT2JqZWN0KHNldHRpbmdzKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ+aHieipsuaPkOS+m+mgkOioreioreWumicsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHNldHRpbmdzID0gYXdhaXQgZ2FtZVN0b3JhZ2UuZ2V0U2V0dGluZ3MoKTtcbiAgICAgIFxuICAgICAgZXhwZWN0KHNldHRpbmdzKS50b0hhdmVQcm9wZXJ0eSgnc291bmRFbmFibGVkJyk7XG4gICAgICBleHBlY3Qoc2V0dGluZ3MpLnRvSGF2ZVByb3BlcnR5KCd2aWJyYXRpb25FbmFibGVkJyk7XG4gICAgICBleHBlY3Qoc2V0dGluZ3MpLnRvSGF2ZVByb3BlcnR5KCdlZmZlY3RzRW5hYmxlZCcpO1xuICAgICAgZXhwZWN0KHNldHRpbmdzKS50b0hhdmVQcm9wZXJ0eSgndGhlbWUnKTtcbiAgICAgIFxuICAgICAgLy8g6aCQ6Kit5YC8XG4gICAgICBleHBlY3Qoc2V0dGluZ3Muc291bmRFbmFibGVkKS50b0JlKHRydWUpO1xuICAgICAgZXhwZWN0KHNldHRpbmdzLnZpYnJhdGlvbkVuYWJsZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc2V0dGluZ3MuZWZmZWN0c0VuYWJsZWQpLnRvQmUodHJ1ZSk7XG4gICAgICBleHBlY3Qoc2V0dGluZ3MudGhlbWUpLnRvQmUoJ2F1dG8nKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoJ+acgOmrmOWIhuiomOmMhCcsICgpID0+IHtcbiAgICB0ZXN0KCfmh4noqbLog73lhLLlrZjlkozoroDlj5bmnIDpq5jliIYnLCBhc3luYyAoKSA9PiB7XG4gICAgICBjb25zdCBtb2RlID0gJ3NpbmdsZS0zMHMnO1xuICAgICAgY29uc3Qgc2NvcmUgPSAxNTA7XG4gICAgICBjb25zdCB0cHMgPSAyNS41O1xuICAgICAgXG4gICAgICBhd2FpdCBnYW1lU3RvcmFnZS5zYXZlSGlnaFNjb3JlKG1vZGUsIHNjb3JlLCB0cHMpO1xuICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgZ2FtZVN0b3JhZ2UuZ2V0SGlnaFNjb3JlKG1vZGUpO1xuICAgICAgXG4gICAgICBleHBlY3QocmVzdWx0KS50b01hdGNoT2JqZWN0KHtcbiAgICAgICAgc2NvcmUsXG4gICAgICAgIHRwcyxcbiAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KE51bWJlciksXG4gICAgICAgIGRhdGU6IGV4cGVjdC5hbnkoU3RyaW5nKVxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCfkuI3lrZjlnKjnmoTmqKHlvI/mh4noqbLov5Tlm54gbnVsbCcsIGFzeW5jICgpID0+IHtcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGdhbWVTdG9yYWdlLmdldEhpZ2hTY29yZSgnbm9uLWV4aXN0ZW50LW1vZGUnKTtcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvQmVOdWxsKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfpgYrmiLLmrbflj7InLCAoKSA9PiB7XG4gICAgdGVzdCgn5oeJ6Kmy6IO95YSy5a2Y6YGK5oiy5q235Y+yJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgZ2FtZURhdGEgPSB7XG4gICAgICAgIG1vZGU6ICdzaW5nbGUnLFxuICAgICAgICBkdXJhdGlvbjogMzAwMDAsXG4gICAgICAgIHNjb3JlOiAxMjAsXG4gICAgICAgIHBlYWtUUFM6IDMwLFxuICAgICAgICBhdmVyYWdlVFBTOiAyMFxuICAgICAgfTtcbiAgICAgIFxuICAgICAgYXdhaXQgZ2FtZVN0b3JhZ2Uuc2F2ZUdhbWVIaXN0b3J5KGdhbWVEYXRhKTtcbiAgICAgIGNvbnN0IGhpc3RvcnkgPSBhd2FpdCBnYW1lU3RvcmFnZS5nZXRHYW1lSGlzdG9yeSgpO1xuICAgICAgXG4gICAgICBleHBlY3QoaGlzdG9yeSkudG9IYXZlTGVuZ3RoKDEpO1xuICAgICAgZXhwZWN0KGhpc3RvcnlbMF0pLnRvTWF0Y2hPYmplY3Qoe1xuICAgICAgICAuLi5nYW1lRGF0YSxcbiAgICAgICAgaWQ6IGV4cGVjdC5hbnkoTnVtYmVyKSxcbiAgICAgICAgdGltZXN0YW1wOiBleHBlY3QuYW55KE51bWJlcilcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgdGVzdCgn5oeJ6Kmy6ZmQ5Yi25q235Y+y6KiY6YyE5pW46YePJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5paw5aKe6LaF6YGO6ZmQ5Yi255qE6KiY6YyEXG4gICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEwNTsgaSsrKSB7XG4gICAgICAgIGF3YWl0IGdhbWVTdG9yYWdlLnNhdmVHYW1lSGlzdG9yeSh7XG4gICAgICAgICAgbW9kZTogJ3Rlc3QnLFxuICAgICAgICAgIGR1cmF0aW9uOiAxMDAwLFxuICAgICAgICAgIHNjb3JlOiBpLFxuICAgICAgICAgIHBlYWtUUFM6IGksXG4gICAgICAgICAgYXZlcmFnZVRQUzogaVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IGdhbWVTdG9yYWdlLmdldEdhbWVIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeS5sZW5ndGgpLnRvQmVMZXNzVGhhbk9yRXF1YWwoMTAwKTtcbiAgICAgIFxuICAgICAgLy8g5oeJ6Kmy5L+d55WZ5pyA5paw55qE6KiY6YyEXG4gICAgICBleHBlY3QoaGlzdG9yeVswXS5zY29yZSkudG9CZSgxMDQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgn56m65q235Y+y5oeJ6Kmy6L+U5Zue56m66Zmj5YiXJywgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgaGlzdG9yeSA9IGF3YWl0IGdhbWVTdG9yYWdlLmdldEdhbWVIaXN0b3J5KCk7XG4gICAgICBleHBlY3QoaGlzdG9yeSkudG9FcXVhbChbXSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfos4fmlpnnrqHnkIYnLCAoKSA9PiB7XG4gICAgdGVzdCgn5oeJ6Kmy6IO95riF56m66YGK5oiy6LOH5paZJywgYXN5bmMgKCkgPT4ge1xuICAgICAgLy8g5paw5aKe5ZCE56iu6YGK5oiy6LOH5paZXG4gICAgICBhd2FpdCBnYW1lU3RvcmFnZS5zYXZlU2V0dGluZ3MoeyBzb3VuZEVuYWJsZWQ6IGZhbHNlIH0pO1xuICAgICAgYXdhaXQgZ2FtZVN0b3JhZ2Uuc2F2ZUhpZ2hTY29yZSgnc2luZ2xlJywgMTAwLCAyMCk7XG4gICAgICBhd2FpdCBnYW1lU3RvcmFnZS5zYXZlR2FtZUhpc3Rvcnkoe1xuICAgICAgICBtb2RlOiAnc2luZ2xlJyxcbiAgICAgICAgZHVyYXRpb246IDMwMDAwLFxuICAgICAgICBzY29yZTogMTAwLFxuICAgICAgICBwZWFrVFBTOiAyMCxcbiAgICAgICAgYXZlcmFnZVRQUzogMTVcbiAgICAgIH0pO1xuICAgICAgXG4gICAgICAvLyDnorroqo3os4fmlpnlrZjlnKhcbiAgICAgIGV4cGVjdChhd2FpdCBnYW1lU3RvcmFnZS5nZXRTZXR0aW5ncygpKS50b01hdGNoT2JqZWN0KHsgc291bmRFbmFibGVkOiBmYWxzZSB9KTtcbiAgICAgIGV4cGVjdChhd2FpdCBnYW1lU3RvcmFnZS5nZXRIaWdoU2NvcmUoJ3NpbmdsZScpKS5ub3QudG9CZU51bGwoKTtcbiAgICAgIGV4cGVjdChhd2FpdCBnYW1lU3RvcmFnZS5nZXRHYW1lSGlzdG9yeSgpKS50b0hhdmVMZW5ndGgoMSk7XG4gICAgICBcbiAgICAgIC8vIOa4heepuumBiuaIsuizh+aWmVxuICAgICAgYXdhaXQgZ2FtZVN0b3JhZ2UuY2xlYXJHYW1lRGF0YSgpO1xuICAgICAgXG4gICAgICAvLyDnorroqo3os4fmlpnlt7LmuIXnqbpcbiAgICAgIGV4cGVjdChhd2FpdCBnYW1lU3RvcmFnZS5nZXRTZXR0aW5ncygpKS50b01hdGNoT2JqZWN0KHsgc291bmRFbmFibGVkOiB0cnVlIH0pOyAvLyDpoJDoqK3lgLxcbiAgICAgIGV4cGVjdChhd2FpdCBnYW1lU3RvcmFnZS5nZXRIaWdoU2NvcmUoJ3NpbmdsZScpKS50b0JlTnVsbCgpO1xuICAgICAgZXhwZWN0KGF3YWl0IGdhbWVTdG9yYWdlLmdldEdhbWVIaXN0b3J5KCkpLnRvRXF1YWwoW10pO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5kZXNjcmliZSgnTG9jYWxTdG9yYWdlQWRhcHRlcicsICgpID0+IHtcbiAgbGV0IGFkYXB0ZXI7XG4gIFxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBsb2NhbFN0b3JhZ2UuY2xlYXIoKTtcbiAgICBhZGFwdGVyID0gbmV3IExvY2FsU3RvcmFnZUFkYXB0ZXIoe1xuICAgICAgZGVidWc6IHRydWUsXG4gICAgICBkYk5hbWU6ICdUZXN0TFMnXG4gICAgfSk7XG4gIH0pO1xuICBcbiAgYWZ0ZXJFYWNoKGFzeW5jICgpID0+IHtcbiAgICBpZiAoYWRhcHRlcikge1xuICAgICAgYXdhaXQgYWRhcHRlci5jbGVhcigpO1xuICAgIH1cbiAgfSk7XG5cbiAgdGVzdCgn5oeJ6Kmy5qqi5ris5YiwIExvY2FsU3RvcmFnZSDlj6/nlKjmgKcnLCAoKSA9PiB7XG4gICAgZXhwZWN0KGFkYXB0ZXIuaXNBdmFpbGFibGUpLnRvQmUodHJ1ZSk7XG4gIH0pO1xuXG4gIHRlc3QoJ+aHieipsuato+eiuueUn+aIkOWujOaVtOmNteWQjScsICgpID0+IHtcbiAgICBjb25zdCBrZXkgPSAndGVzdEtleSc7XG4gICAgY29uc3QgZnVsbEtleSA9IGFkYXB0ZXIuZ2V0RnVsbEtleShrZXkpO1xuICAgIFxuICAgIGV4cGVjdChmdWxsS2V5KS50b0JlKCdUZXN0TFM6dGVzdEtleScpO1xuICB9KTtcblxuICB0ZXN0KCfmh4noqbLog73njbLlj5bkvb/nlKjntbHoqIgnLCBhc3luYyAoKSA9PiB7XG4gICAgYXdhaXQgYWRhcHRlci5pbml0KCk7XG4gICAgXG4gICAgLy8g5paw5aKe5LiA5Lqb5ris6Kmm6LOH5paZXG4gICAgYXdhaXQgYWRhcHRlci5zZXRJdGVtKCd0ZXN0MScsICd2YWx1ZTEnKTtcbiAgICBhd2FpdCBhZGFwdGVyLnNldEl0ZW0oJ3Rlc3QyJywgeyBjb21wbGV4OiAnb2JqZWN0JyB9KTtcbiAgICBcbiAgICBjb25zdCBzdGF0cyA9IGF3YWl0IGFkYXB0ZXIuZ2V0U3RhdHMoKTtcbiAgICBcbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdpdGVtQ291bnQnKTtcbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCd0b3RhbFNpemUnKTtcbiAgICBleHBlY3Qoc3RhdHMpLnRvSGF2ZVByb3BlcnR5KCdmb3JtYXR0ZWRTaXplJyk7XG4gICAgZXhwZWN0KHN0YXRzKS50b0hhdmVQcm9wZXJ0eSgndXNhZ2VQZXJjZW50YWdlJyk7XG4gICAgXG4gICAgZXhwZWN0KHN0YXRzLml0ZW1Db3VudCkudG9CZSgyKTtcbiAgICBleHBlY3Qoc3RhdHMudG90YWxTaXplKS50b0JlR3JlYXRlclRoYW4oMCk7XG4gIH0pO1xufSk7XG5cbmRlc2NyaWJlKCfmlbTlkIjmuKzoqaYnLCAoKSA9PiB7XG4gIHRlc3QoJ1N0b3JhZ2VBZGFwdGVyIOaHieipsuWcqCBJbmRleGVkREIg5aSx5pWX5pmC5Zue6YCA5YiwIExvY2FsU3RvcmFnZScsIGFzeW5jICgpID0+IHtcbiAgICAvLyBNb2NrIEluZGV4ZWREQiDlpLHmlZdcbiAgICBjb25zdCBvcmlnaW5hbEluZGV4ZWREQiA9IGdsb2JhbC5pbmRleGVkREI7XG4gICAgZ2xvYmFsLmluZGV4ZWREQiA9IHVuZGVmaW5lZDtcbiAgICBcbiAgICBjb25zdCBhZGFwdGVyID0gbmV3IFN0b3JhZ2VBZGFwdGVyKHtcbiAgICAgIHByZWZlcnJlZFN0b3JhZ2U6ICdpbmRleGVkZGInLFxuICAgICAgZGVidWc6IHRydWVcbiAgICB9KTtcbiAgICBcbiAgICBhd2FpdCBhZGFwdGVyLmluaXQoKTtcbiAgICBcbiAgICAvLyDnorroqo3kvb/nlKggTG9jYWxTdG9yYWdlXG4gICAgY29uc3QgaW5mbyA9IGFkYXB0ZXIuZ2V0QWRhcHRlckluZm8oKTtcbiAgICBleHBlY3QoaW5mby5wcmltYXJ5KS50b0JlKCdMb2NhbFN0b3JhZ2VBZGFwdGVyJyk7XG4gICAgXG4gICAgLy8g5ris6Kmm5Z+65pys5Yqf6IO9XG4gICAgYXdhaXQgYWRhcHRlci5zZXRJdGVtKCdmYWxsYmFjay10ZXN0JywgJ3dvcmtzJyk7XG4gICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgYWRhcHRlci5nZXRJdGVtKCdmYWxsYmFjay10ZXN0Jyk7XG4gICAgZXhwZWN0KHJlc3VsdCkudG9CZSgnd29ya3MnKTtcbiAgICBcbiAgICAvLyDpgoTljp9cbiAgICBnbG9iYWwuaW5kZXhlZERCID0gb3JpZ2luYWxJbmRleGVkREI7XG4gIH0pO1xufSk7XG4iXSwibWFwcGluZ3MiOiI7O0FBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxNQUFNO0VBQUVBLGNBQWM7RUFBRUM7QUFBWSxDQUFDLEdBQUdDLE9BQU8sQ0FBQyx1QkFBdUIsQ0FBQztBQUN4RSxNQUFNO0VBQUVDO0FBQW9CLENBQUMsR0FBR0QsT0FBTyxDQUFDLDRCQUE0QixDQUFDO0FBQ3JFLE1BQU07RUFBRUU7QUFBaUIsQ0FBQyxHQUFHRixPQUFPLENBQUMseUJBQXlCLENBQUM7O0FBRS9EO0FBQ0FHLE1BQU0sQ0FBQ0MsU0FBUyxHQUFHSixPQUFPLENBQUMsZ0JBQWdCLENBQUM7QUFDNUNHLE1BQU0sQ0FBQ0UsV0FBVyxHQUFHTCxPQUFPLENBQUMsZ0NBQWdDLENBQUM7QUFFOURNLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxNQUFNO0VBQy9CLElBQUlDLGNBQWM7RUFFbEJDLFVBQVUsQ0FBQyxZQUFZO0lBQ3JCO0lBQ0FDLFlBQVksQ0FBQ0MsS0FBSyxDQUFDLENBQUM7O0lBRXBCO0lBQ0FILGNBQWMsR0FBRyxJQUFJVCxjQUFjLENBQUM7TUFDbENhLEtBQUssRUFBRSxJQUFJO01BQ1hDLE1BQU0sRUFBRSxRQUFRO01BQ2hCQyxPQUFPLEVBQUU7SUFDWCxDQUFDLENBQUM7SUFFRixNQUFNTixjQUFjLENBQUNPLElBQUksQ0FBQyxDQUFDO0VBQzdCLENBQUMsQ0FBQztFQUVGQyxTQUFTLENBQUMsWUFBWTtJQUNwQixJQUFJUixjQUFjLEVBQUU7TUFDbEIsTUFBTUEsY0FBYyxDQUFDRyxLQUFLLENBQUMsQ0FBQztJQUM5QjtFQUNGLENBQUMsQ0FBQztFQUVGSixRQUFRLENBQUMsTUFBTSxFQUFFLE1BQU07SUFDckJVLElBQUksQ0FBQyxjQUFjLEVBQUUsWUFBWTtNQUMvQixNQUFNQyxHQUFHLEdB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