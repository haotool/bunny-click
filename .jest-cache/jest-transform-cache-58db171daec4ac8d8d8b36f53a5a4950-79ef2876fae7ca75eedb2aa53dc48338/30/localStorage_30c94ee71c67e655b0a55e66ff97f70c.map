{"version":3,"names":["LocalStorageAdapter","constructor","config","prefix","dbName","isAvailable","checkAvailability","testKey","localStorage","setItem","removeItem","e","console","warn","init","Error","cleanupExpiredData","log","keys","Object","prefixedKeys","filter","key","startsWith","data","JSON","parse","getItem","__expires","Date","now","parseError","error","getFullKey","value","options","fullKey","wrappedData","__timestamp","__version","version","ttl","serializedData","stringify","length","formatBytes","name","cleanupOldData","retryError","message","hasOwnProperty","clear","map","substring","size","dataWithTimestamp","timestamp","push","sort","a","b","itemsToRemove","Math","ceil","i","bytes","k","sizes","floor","parseFloat","pow","toFixed","args","debug","getStats","totalSize","itemCount","formattedSize","maxSize","usagePercentage","exports"],"sources":["localStorage.js"],"sourcesContent":["/**\n * LocalStorage é©é…å™¨\n * æä¾›æ¨™æº–åŒ–çš„ LocalStorage ä»‹é¢\n *\n * @author haotool\n * @version 7.2.3\n * @created 2025-08-18T02:39:58+08:00\n */\n\nexport class LocalStorageAdapter {\n  constructor(config = {}) {\n    this.config = config;\n    this.prefix = config.dbName ? `${config.dbName}:` : 'bunny-click:';\n    this.isAvailable = this.checkAvailability();\n  }\n\n  /**\n   * æª¢æŸ¥ LocalStorage å¯ç”¨æ€§\n   */\n  checkAvailability() {\n    try {\n      const testKey = '__storage_test__';\n      localStorage.setItem(testKey, 'test');\n      localStorage.removeItem(testKey);\n      return true;\n    } catch (e) {\n      console.warn('âš ï¸ LocalStorage ä¸å¯ç”¨:', e);\n      return false;\n    }\n  }\n\n  /**\n   * åˆå§‹åŒ–\n   */\n  async init() {\n    if (!this.isAvailable) {\n      throw new Error('LocalStorage ä¸å¯ç”¨');\n    }\n\n    // æ¸…ç†éŽæœŸè³‡æ–™\n    await this.cleanupExpiredData();\n\n    this.log('âœ… LocalStorage é©é…å™¨åˆå§‹åŒ–å®Œæˆ');\n  }\n\n  /**\n   * æ¸…ç†éŽæœŸè³‡æ–™\n   */\n  async cleanupExpiredData() {\n    try {\n      const keys = Object.keys(localStorage);\n      const prefixedKeys = keys.filter(key => key.startsWith(this.prefix));\n\n      for (const key of prefixedKeys) {\n        try {\n          const data = JSON.parse(localStorage.getItem(key));\n\n          // æª¢æŸ¥æ˜¯å¦æœ‰éŽæœŸæ™‚é–“ä¸”å·²éŽæœŸ\n          if (data && data.__expires && Date.now() > data.__expires) {\n            localStorage.removeItem(key);\n            this.log(`ðŸ§¹ æ¸…ç†éŽæœŸè³‡æ–™: ${key}`);\n          }\n        } catch (parseError) {\n          // å¦‚æžœè§£æžå¤±æ•—ï¼Œå¯èƒ½æ˜¯èˆŠæ ¼å¼è³‡æ–™ï¼Œä¿ç•™ä¸å‹•\n          this.log(`âš ï¸ è·³éŽç„¡æ³•è§£æžçš„è³‡æ–™: ${key}`);\n        }\n      }\n    } catch (error) {\n      this.log('âš ï¸ æ¸…ç†éŽæœŸè³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);\n    }\n  }\n\n  /**\n   * ç”Ÿæˆå®Œæ•´éµå\n   */\n  getFullKey(key) {\n    return `${this.prefix}${key}`;\n  }\n\n  /**\n   * å„²å­˜è³‡æ–™\n   */\n  async setItem(key, value, options = {}) {\n    if (!this.isAvailable) {\n      throw new Error('LocalStorage ä¸å¯ç”¨');\n    }\n\n    try {\n      const fullKey = this.getFullKey(key);\n\n      // åŒ…è£è³‡æ–™ï¼Œæ·»åŠ å…ƒè³‡è¨Š\n      const wrappedData = {\n        value,\n        __timestamp: Date.now(),\n        __version: this.config.version || 1,\n      };\n\n      // æ·»åŠ éŽæœŸæ™‚é–“ (å¦‚æžœæŒ‡å®š)\n      if (options.ttl) {\n        wrappedData.__expires = Date.now() + options.ttl;\n      }\n\n      const serializedData = JSON.stringify(wrappedData);\n\n      // æª¢æŸ¥å¤§å°é™åˆ¶ (LocalStorage é€šå¸¸é™åˆ¶ç‚º 5-10MB)\n      if (serializedData.length > 5 * 1024 * 1024) {\n        throw new Error('è³‡æ–™éŽå¤§ï¼Œè¶…å‡º LocalStorage é™åˆ¶');\n      }\n\n      localStorage.setItem(fullKey, serializedData);\n      this.log(`ðŸ’¾ LocalStorage å„²å­˜: ${key} (${this.formatBytes(serializedData.length)})`);\n\n    } catch (error) {\n      if (error.name === 'QuotaExceededError' || error.name === 'NS_ERROR_DOM_QUOTA_REACHED') {\n        // é…é¡è¶…å‡ºï¼Œå˜—è©¦æ¸…ç†èˆŠè³‡æ–™\n        await this.cleanupOldData();\n\n        // å†æ¬¡å˜—è©¦å„²å­˜\n        try {\n          const fullKey = this.getFullKey(key);\n          const wrappedData = { value, __timestamp: Date.now() };\n          localStorage.setItem(fullKey, JSON.stringify(wrappedData));\n          this.log(`ðŸ’¾ LocalStorage å„²å­˜ (æ¸…ç†å¾Œ): ${key}`);\n        } catch (retryError) {\n          throw new Error(`LocalStorage é…é¡å·²æ»¿ä¸”æ¸…ç†å¾Œä»ç„¡æ³•å„²å­˜: ${retryError.message}`);\n        }\n      } else {\n        throw error;\n      }\n    }\n  }\n\n  /**\n   * è®€å–è³‡æ–™\n   */\n  async getItem(key) {\n    if (!this.isAvailable) {\n      throw new Error('LocalStorage ä¸å¯ç”¨');\n    }\n\n    try {\n      const fullKey = this.getFullKey(key);\n      const serializedData = localStorage.getItem(fullKey);\n\n      if (serializedData === null) {\n        return null;\n      }\n\n      const wrappedData = JSON.parse(serializedData);\n\n      // æª¢æŸ¥æ˜¯å¦éŽæœŸ\n      if (wrappedData.__expires && Date.now() > wrappedData.__expires) {\n        localStorage.removeItem(fullKey);\n        this.log(`â° è³‡æ–™å·²éŽæœŸä¸¦ç§»é™¤: ${key}`);\n        return null;\n      }\n\n      // ç›¸å®¹æ€§è™•ç†ï¼šå¦‚æžœæ²’æœ‰åŒ…è£çµæ§‹ï¼Œç›´æŽ¥è¿”å›žåŽŸå§‹è³‡æ–™\n      if (wrappedData.hasOwnProperty('value')) {\n        this.log(`ðŸ“– LocalStorage è®€å–: ${key}`);\n        return wrappedData.value;\n      } else {\n        // èˆŠæ ¼å¼è³‡æ–™\n        this.log(`ðŸ“– LocalStorage è®€å– (èˆŠæ ¼å¼): ${key}`);\n        return wrappedData;\n      }\n\n    } catch (error) {\n      console.error(`âŒ LocalStorage è®€å–å¤±æ•— ${key}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * ç§»é™¤è³‡æ–™\n   */\n  async removeItem(key) {\n    if (!this.isAvailable) {\n      throw new Error('LocalStorage ä¸å¯ç”¨');\n    }\n\n    const fullKey = this.getFullKey(key);\n    localStorage.removeItem(fullKey);\n    this.log(`ðŸ—‘ï¸ LocalStorage ç§»é™¤: ${key}`);\n  }\n\n  /**\n   * æ¸…ç©ºæ‰€æœ‰è³‡æ–™\n   */\n  async clear() {\n    if (!this.isAvailable) {\n      throw new Error('LocalStorage ä¸å¯ç”¨');\n    }\n\n    const keys = Object.keys(localStorage);\n    const prefixedKeys = keys.filter(key => key.startsWith(this.prefix));\n\n    for (const key of prefixedKeys) {\n      localStorage.removeItem(key);\n    }\n\n    this.log(`ðŸ§¹ LocalStorage æ¸…ç©º: ${prefixedKeys.length} é …ç›®`);\n  }\n\n  /**\n   * ç²å–æ‰€æœ‰éµå\n   */\n  async keys() {\n    if (!this.isAvailable) {\n      throw new Error('LocalStorage ä¸å¯ç”¨');\n    }\n\n    const keys = Object.keys(localStorage);\n    return keys\n      .filter(key => key.startsWith(this.prefix))\n      .map(key => key.substring(this.prefix.length));\n  }\n\n  /**\n   * ç²å–å„²å­˜é …ç›®æ•¸é‡\n   */\n  async size() {\n    const keys = await this.keys();\n    return keys.length;\n  }\n\n  /**\n   * æ¸…ç†èˆŠè³‡æ–™ (ç•¶é…é¡ä¸è¶³æ™‚)\n   */\n  async cleanupOldData() {\n    try {\n      const keys = Object.keys(localStorage);\n      const prefixedKeys = keys.filter(key => key.startsWith(this.prefix));\n\n      // ç²å–æ‰€æœ‰è³‡æ–™çš„æ™‚é–“æˆ³è¨˜\n      const dataWithTimestamp = [];\n\n      for (const key of prefixedKeys) {\n        try {\n          const data = JSON.parse(localStorage.getItem(key));\n          const timestamp = data.__timestamp || 0;\n          dataWithTimestamp.push({ key, timestamp });\n        } catch (e) {\n          // ç„¡æ³•è§£æžçš„è³‡æ–™è¦–ç‚ºæœ€èˆŠ\n          dataWithTimestamp.push({ key, timestamp: 0 });\n        }\n      }\n\n      // æŒ‰æ™‚é–“æˆ³è¨˜æŽ’åºï¼Œç§»é™¤æœ€èˆŠçš„ 25% è³‡æ–™\n      dataWithTimestamp.sort((a, b) => a.timestamp - b.timestamp);\n      const itemsToRemove = Math.ceil(dataWithTimestamp.length * 0.25);\n\n      for (let i = 0; i < itemsToRemove; i++) {\n        localStorage.removeItem(dataWithTimestamp[i].key);\n        this.log(`ðŸ§¹ æ¸…ç†èˆŠè³‡æ–™: ${dataWithTimestamp[i].key}`);\n      }\n\n      this.log(`ðŸ§¹ æ¸…ç†å®Œæˆï¼Œç§»é™¤ ${itemsToRemove} é …èˆŠè³‡æ–™`);\n\n    } catch (error) {\n      this.log('âš ï¸ æ¸…ç†èˆŠè³‡æ–™æ™‚ç™¼ç”ŸéŒ¯èª¤:', error);\n    }\n  }\n\n  /**\n   * æ ¼å¼åŒ–ä½å…ƒçµ„å¤§å°\n   */\n  formatBytes(bytes) {\n    if (bytes === 0) {return '0 Bytes';}\n    const k = 1024;\n    const sizes = ['Bytes', 'KB', 'MB'];\n    const i = Math.floor(Math.log(bytes) / Math.log(k));\n    return `${parseFloat((bytes / Math.pow(k, i)).toFixed(2))} ${sizes[i]}`;\n  }\n\n  /**\n   * èª¿è©¦æ—¥èªŒ\n   */\n  log(...args) {\n    if (this.config.debug) {\n      console.log('ðŸ“ LocalStorageAdapter:', ...args);\n    }\n  }\n\n  /**\n   * ç²å–ä½¿ç”¨çµ±è¨ˆ\n   */\n  async getStats() {\n    try {\n      const keys = await this.keys();\n      let totalSize = 0;\n\n      for (const key of keys) {\n        const fullKey = this.getFullKey(key);\n        const data = localStorage.getItem(fullKey);\n        if (data) {\n          totalSize += data.length * 2; // UTF-16 å­—ç¬¦ä½” 2 ä½å…ƒçµ„\n        }\n      }\n\n      return {\n        itemCount: keys.length,\n        totalSize,\n        formattedSize: this.formatBytes(totalSize),\n        maxSize: 5 * 1024 * 1024, // 5MB ä¼°è¨ˆå€¼\n        usagePercentage: (totalSize / (5 * 1024 * 1024)) * 100,\n      };\n    } catch (error) {\n      this.log('âš ï¸ ç²å–çµ±è¨ˆè³‡è¨Šæ™‚ç™¼ç”ŸéŒ¯èª¤:', error);\n      return null;\n    }\n  }\n}\n"],"mappings":"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","ignoreList":[]}