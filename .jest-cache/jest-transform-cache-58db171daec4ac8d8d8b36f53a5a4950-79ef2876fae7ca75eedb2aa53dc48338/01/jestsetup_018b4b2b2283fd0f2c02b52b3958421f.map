{"version":3,"names":["indexedDB","window","require","global","IDBKeyRange","IDBTransaction","IDBDatabase","IDBObjectStore","IDBIndex","IDBCursor","IDBRequest","requestAnimationFrame","cb","setTimeout","cancelAnimationFrame","clearTimeout","ResizeObserver","constructor","callback","observe","unobserve","disconnect","IntersectionObserver","options","jest","process","on","reason","promise","console","error","log"],"sources":["jest.setup.js"],"sourcesContent":["/**\n * Jest 測試環境設置檔案\n * 基於 Jest 最佳實踐，為 CI 環境提供必要的全域模擬\n * 建立時間: 2025-08-26T23:10:06+08:00 [time.now:Asia/Taipei]\n * 負責人: haotool\n */\n\n// 修復 CI 環境中 IndexedDB 不可用的問題\nif (typeof indexedDB === 'undefined' || typeof window === 'undefined') {\n  // 在 Node.js 環境中模擬 IndexedDB\n  require('fake-indexeddb/auto');\n  \n  // 確保全域變數可用\n  global.indexedDB = global.indexedDB || require('fake-indexeddb');\n  global.IDBKeyRange = global.IDBKeyRange || require('fake-indexeddb/lib/FDBKeyRange');\n  global.IDBTransaction = global.IDBTransaction || require('fake-indexeddb/lib/FDBTransaction');\n  global.IDBDatabase = global.IDBDatabase || require('fake-indexeddb/lib/FDBDatabase');\n  global.IDBObjectStore = global.IDBObjectStore || require('fake-indexeddb/lib/FDBObjectStore');\n  global.IDBIndex = global.IDBIndex || require('fake-indexeddb/lib/FDBIndex');\n  global.IDBCursor = global.IDBCursor || require('fake-indexeddb/lib/FDBCursor');\n  global.IDBRequest = global.IDBRequest || require('fake-indexeddb/lib/FDBRequest');\n}\n\n// 設置 Jest 測試環境的其他全域變數\nif (typeof window !== 'undefined') {\n  // 模擬 requestAnimationFrame 和 cancelAnimationFrame\n  global.requestAnimationFrame = global.requestAnimationFrame || ((cb) => setTimeout(cb, 16));\n  global.cancelAnimationFrame = global.cancelAnimationFrame || clearTimeout;\n  \n  // 模擬 ResizeObserver\n  global.ResizeObserver = global.ResizeObserver || class ResizeObserver {\n    constructor(callback) {\n      this.callback = callback;\n    }\n    observe() {\n      // 模擬實作\n    }\n    unobserve() {\n      // 模擬實作\n    }\n    disconnect() {\n      // 模擬實作\n    }\n  };\n  \n  // 模擬 IntersectionObserver\n  global.IntersectionObserver = global.IntersectionObserver || class IntersectionObserver {\n    constructor(callback, options) {\n      this.callback = callback;\n      this.options = options;\n    }\n    observe() {\n      // 模擬實作\n    }\n    unobserve() {\n      // 模擬實作\n    }\n    disconnect() {\n      // 模擬實作\n    }\n  };\n}\n\n// 設置測試超時時間（5 秒）\njest.setTimeout(5000);\n\n// 設置全域錯誤處理\nprocess.on('unhandledRejection', (reason, promise) => {\n  console.error('Unhandled Rejection at:', promise, 'reason:', reason);\n});\n\nconsole.log('✅ Jest 測試環境設置完成');\n"],"mappings":";;AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,IAAI,OAAOA,SAAS,KAAK,WAAW,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;EACrE;EACAC,OAAO,CAAC,qBAAqB,CAAC;;EAE9B;EACAC,MAAM,CAACH,SAAS,GAAGG,MAAM,CAACH,SAAS,IAAIE,OAAO,CAAC,gBAAgB,CAAC;EAChEC,MAAM,CAACC,WAAW,GAAGD,MAAM,CAACC,WAAW,IAAIF,OAAO,CAAC,gCAAgC,CAAC;EACpFC,MAAM,CAACE,cAAc,GAAGF,MAAM,CAACE,cAAc,IAAIH,OAAO,CAAC,mCAAmC,CAAC;EAC7FC,MAAM,CAACG,WAAW,GAAGH,MAAM,CAACG,WAAW,IAAIJ,OAAO,CAAC,gCAAgC,CAAC;EACpFC,MAAM,CAACI,cAAc,GAAGJ,MAAM,CAACI,cAAc,IAAIL,OAAO,CAAC,mCAAmC,CAAC;EAC7FC,MAAM,CAACK,QAAQ,GAAGL,MAAM,CAACK,QAAQ,IAAIN,OAAO,CAAC,6BAA6B,CAAC;EAC3EC,MAAM,CAACM,SAAS,GAAGN,MAAM,CAACM,SAAS,IAAIP,OAAO,CAAC,8BAA8B,CAAC;EAC9EC,MAAM,CAACO,UAAU,GAAGP,MAAM,CAACO,UAAU,IAAIR,OAAO,CAAC,+BAA+B,CAAC;AACnF;;AAEA;AACA,IAAI,OAAOD,MAAM,KAAK,WAAW,EAAE;EACjC;EACAE,MAAM,CAACQ,qBAAqB,GAAGR,MAAM,CAACQ,qBAAqB,KAAMC,EAAE,IAAKC,UAAU,CAACD,EAAE,EAAE,EAAE,CAAC,CAAC;EAC3FT,MAAM,CAACW,oBAAoB,GAAGX,MAAM,CAACW,oBAAoB,IAAIC,YAAY;;EAEzE;EACAZ,MAAM,CAACa,cAAc,GAAGb,MAAM,CAACa,cAAc,IAAI,MAAMA,cAAc,CAAC;IACpEC,WAAWA,CAACC,QAAQ,EAAE;MACpB,IAAI,CAACA,QAAQ,GAAGA,QAAQ;IAC1B;IACAC,OAAOA,CAAA,EAAG;MACR;IAAA;IAEFC,SAASA,CAAA,EAAG;MACV;IAAA;IAEFC,UAAUA,CAAA,EAAG;MACX;IAAA;EAEJ,CAAC;;EAED;EACAlB,MAAM,CAACmB,oBAAoB,GAAGnB,MAAM,CAACmB,oBAAoB,IAAI,MAAMA,oBAAoB,CAAC;IACtFL,WAAWA,CAACC,QAAQ,EAAEK,OAAO,EAAE;MAC7B,IAAI,CAACL,QAAQ,GAAGA,QAAQ;MACxB,IAAI,CAACK,OAAO,GAAGA,OAAO;IACxB;IACAJ,OAAOA,CAAA,EAAG;MACR;IAAA;IAEFC,SAASA,CAAA,EAAG;MACV;IAAA;IAEFC,UAAUA,CAAA,EAAG;MACX;IAAA;EAEJ,CAAC;AACH;;AAEA;AACAG,IAAI,CAACX,UAAU,CAAC,IAAI,CAAC;;AAErB;AACAY,OAAO,CAACC,EAAE,CAAC,oBAAoB,EAAE,CAACC,MAAM,EAAEC,OAAO,KAAK;EACpDC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,OAAO,EAAE,SAAS,EAAED,MAAM,CAAC;AACtE,CAAC,CAAC;AAEFE,OAAO,CAACE,GAAG,CAAC,iBAAiB,CAAC","ignoreList":[]}