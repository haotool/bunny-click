{"version":3,"names":["global","requestAnimationFrame","callback","setTimeout","cancelAnimationFrame","id","clearTimeout","performance","now","Date","mark","measure","getEntriesByName","getEntriesByType","URL","require","Request","MockRequest","constructor","url","options","href","method","headers","Map","Object","entries","Response","MockResponse","body","status","ok","json","JSON","parse","text","defineProperty","value","userAgent","serviceWorker","register","jest","fn","mockResolvedValue","writable","addEventListener","removeEventListener","originalError","console","error","args","includes","apply"],"sources":["setup.js"],"sourcesContent":["/**\n * Jest 測試環境設置文件\n * 提供瀏覽器環境 polyfills 與模擬對象\n * [context7:/jestjs/jest:2025-08-20T01:33:46+08:00]\n */\n\n// DOM polyfills for jsdom environment\nglobal.requestAnimationFrame = (callback) => {\n  return setTimeout(callback, 0);\n};\n\nglobal.cancelAnimationFrame = (id) => {\n  clearTimeout(id);\n};\n\n// Performance API polyfill\nif (!global.performance) {\n  global.performance = {\n    now: () => Date.now(),\n    mark: () => {},\n    measure: () => {},\n    getEntriesByName: () => [],\n    getEntriesByType: () => [],\n  };\n}\n\n// URL constructor polyfill for Web API tests\nglobal.URL = global.URL || require('url').URL;\n\n// Request/Response polyfills for PWA tests\nglobal.Request = global.Request || class MockRequest {\n  constructor(url, options = {}) {\n    this.url = new URL(url, 'http://localhost').href;\n    this.method = options.method || 'GET';\n    this.headers = new Map(Object.entries(options.headers || {}));\n  }\n};\n\nglobal.Response = global.Response || class MockResponse {\n  constructor(body, options = {}) {\n    this.body = body;\n    this.status = options.status || 200;\n    this.headers = new Map(Object.entries(options.headers || {}));\n    this.ok = this.status >= 200 && this.status < 300;\n  }\n  \n  async json() {\n    return JSON.parse(this.body);\n  }\n  \n  async text() {\n    return this.body;\n  }\n};\n\n// Navigator polyfill\nObject.defineProperty(global, 'navigator', {\n  value: {\n    userAgent: 'Mozilla/5.0 (Test Environment)',\n    serviceWorker: {\n      register: jest.fn().mockResolvedValue({}),\n    },\n  },\n  writable: true,\n});\n\n// Window event listener polyfill\nglobal.addEventListener = global.addEventListener || jest.fn();\nglobal.removeEventListener = global.removeEventListener || jest.fn();\n\n// Console polyfill for cleaner test output\nconst originalError = console.error;\nconsole.error = (...args) => {\n  // Suppress expected errors in test environment\n  if (args[0] && typeof args[0] === 'string' && \n      (args[0].includes('Warning:') || args[0].includes('React'))) {\n    return;\n  }\n  originalError.apply(console, args);\n};"],"mappings":"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","ignoreList":[]}