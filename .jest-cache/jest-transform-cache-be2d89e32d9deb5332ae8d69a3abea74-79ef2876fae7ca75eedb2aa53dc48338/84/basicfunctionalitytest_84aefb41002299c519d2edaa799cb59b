97da71ef3f32e95eeb2635e7db642b6c
"use strict";

/**
 * Bunny Click 基本功能測試
 * 測試遊戲的核心功能是否正常運作
 */

describe('Bunny Click 基本功能測試', () => {
  let gameState;
  beforeEach(() => {
    // 模擬遊戲狀態
    gameState = {
      score: 0,
      tps: 0,
      isActive: false,
      mode: 'single',
      timeLeft: 30
    };
  });
  describe('遊戲初始化', () => {
    test('應該正確初始化遊戲狀態', () => {
      expect(gameState.score).toBe(0);
      expect(gameState.tps).toBe(0);
      expect(gameState.isActive).toBe(false);
      expect(gameState.mode).toBe('single');
    });
    test('應該設定正確的遊戲時間', () => {
      expect(gameState.timeLeft).toBeGreaterThan(0);
      expect(gameState.timeLeft).toBeLessThanOrEqual(60);
    });
  });
  describe('分數計算', () => {
    test('應該正確累加分數', () => {
      const initialScore = gameState.score;
      const clickCount = 5;

      // 模擬點擊
      for (let i = 0; i < clickCount; i++) {
        gameState.score++;
      }
      expect(gameState.score).toBe(initialScore + clickCount);
    });
    test('分數不應該為負數', () => {
      gameState.score = 0;
      // 嘗試減少分數（不應該發生）
      gameState.score = Math.max(0, gameState.score - 1);
      expect(gameState.score).toBeGreaterThanOrEqual(0);
    });
  });
  describe('TPS 計算', () => {
    test('TPS 應該在合理範圍內', () => {
      // 模擬 TPS 計算
      const mockTPS = 15.5;
      gameState.tps = mockTPS;
      expect(gameState.tps).toBeGreaterThanOrEqual(0);
      expect(gameState.tps).toBeLessThan(100); // 合理的上限
    });
    test('TPS 應該支援小數點精度', () => {
      const preciseTPS = 12.7;
      gameState.tps = preciseTPS;
      expect(gameState.tps).toBe(preciseTPS);
      expect(Number.isInteger(gameState.tps)).toBe(false);
    });
  });
  describe('遊戲模式', () => {
    test('應該支援單人模式', () => {
      gameState.mode = 'single';
      expect(gameState.mode).toBe('single');
    });
    test('應該支援雙人模式', () => {
      gameState.mode = 'dual';
      expect(gameState.mode).toBe('dual');
    });
    test('不應該接受無效的遊戲模式', () => {
      const validModes = ['single', 'dual'];
      const testMode = 'invalid';
      if (!validModes.includes(testMode)) {
        gameState.mode = 'single'; // 預設值
      }
      expect(validModes).toContain(gameState.mode);
    });
  });
  describe('遊戲狀態管理', () => {
    test('遊戲開始時應該設定為活躍狀態', () => {
      gameState.isActive = true;
      expect(gameState.isActive).toBe(true);
    });
    test('遊戲結束時應該設定為非活躍狀態', () => {
      gameState.isActive = false;
      expect(gameState.isActive).toBe(false);
    });
    test('時間歸零時遊戲應該結束', () => {
      gameState.timeLeft = 0;
      gameState.isActive = gameState.timeLeft > 0;
      expect(gameState.isActive).toBe(false);
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJkZXNjcmliZSIsImdhbWVTdGF0ZSIsImJlZm9yZUVhY2giLCJzY29yZSIsInRwcyIsImlzQWN0aXZlIiwibW9kZSIsInRpbWVMZWZ0IiwidGVzdCIsImV4cGVjdCIsInRvQmUiLCJ0b0JlR3JlYXRlclRoYW4iLCJ0b0JlTGVzc1RoYW5PckVxdWFsIiwiaW5pdGlhbFNjb3JlIiwiY2xpY2tDb3VudCIsImkiLCJNYXRoIiwibWF4IiwidG9CZUdyZWF0ZXJUaGFuT3JFcXVhbCIsIm1vY2tUUFMiLCJ0b0JlTGVzc1RoYW4iLCJwcmVjaXNlVFBTIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwidmFsaWRNb2RlcyIsInRlc3RNb2RlIiwiaW5jbHVkZXMiLCJ0b0NvbnRhaW4iXSwic291cmNlcyI6WyJiYXNpYy1mdW5jdGlvbmFsaXR5LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBCdW5ueSBDbGljayDln7rmnKzlip/og73muKzoqaZcbiAqIOa4rOippumBiuaIsueahOaguOW/g+WKn+iDveaYr+WQpuato+W4uOmBi+S9nFxuICovXG5cbmRlc2NyaWJlKCdCdW5ueSBDbGljayDln7rmnKzlip/og73muKzoqaYnLCAoKSA9PiB7XG4gIGxldCBnYW1lU3RhdGU7XG5cbiAgYmVmb3JlRWFjaCgoKSA9PiB7XG4gICAgLy8g5qih5pOs6YGK5oiy54uA5oWLXG4gICAgZ2FtZVN0YXRlID0ge1xuICAgICAgc2NvcmU6IDAsXG4gICAgICB0cHM6IDAsXG4gICAgICBpc0FjdGl2ZTogZmFsc2UsXG4gICAgICBtb2RlOiAnc2luZ2xlJyxcbiAgICAgIHRpbWVMZWZ0OiAzMCxcbiAgICB9O1xuICB9KTtcblxuICBkZXNjcmliZSgn6YGK5oiy5Yid5aeL5YyWJywgKCkgPT4ge1xuICAgIHRlc3QoJ+aHieipsuato+eiuuWIneWni+WMlumBiuaIsueLgOaFiycsICgpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lU3RhdGUuc2NvcmUpLnRvQmUoMCk7XG4gICAgICBleHBlY3QoZ2FtZVN0YXRlLnRwcykudG9CZSgwKTtcbiAgICAgIGV4cGVjdChnYW1lU3RhdGUuaXNBY3RpdmUpLnRvQmUoZmFsc2UpO1xuICAgICAgZXhwZWN0KGdhbWVTdGF0ZS5tb2RlKS50b0JlKCdzaW5nbGUnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ+aHieipsuioreWumuato+eiuueahOmBiuaIsuaZgumWkycsICgpID0+IHtcbiAgICAgIGV4cGVjdChnYW1lU3RhdGUudGltZUxlZnQpLnRvQmVHcmVhdGVyVGhhbigwKTtcbiAgICAgIGV4cGVjdChnYW1lU3RhdGUudGltZUxlZnQpLnRvQmVMZXNzVGhhbk9yRXF1YWwoNjApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn5YiG5pW46KiI566XJywgKCkgPT4ge1xuICAgIHRlc3QoJ+aHieipsuato+eiuue0r+WKoOWIhuaVuCcsICgpID0+IHtcbiAgICAgIGNvbnN0IGluaXRpYWxTY29yZSA9IGdhbWVTdGF0ZS5zY29yZTtcbiAgICAgIGNvbnN0IGNsaWNrQ291bnQgPSA1O1xuXG4gICAgICAvLyDmqKHmk6zpu57mk4pcbiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY2xpY2tDb3VudDsgaSsrKSB7XG4gICAgICAgIGdhbWVTdGF0ZS5zY29yZSsrO1xuICAgICAgfVxuXG4gICAgICBleHBlY3QoZ2FtZVN0YXRlLnNjb3JlKS50b0JlKGluaXRpYWxTY29yZSArIGNsaWNrQ291bnQpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgn5YiG5pW45LiN5oeJ6Kmy54K66LKg5pW4JywgKCkgPT4ge1xuICAgICAgZ2FtZVN0YXRlLnNjb3JlID0gMDtcbiAgICAgIC8vIOWYl+ippua4m+WwkeWIhuaVuO+8iOS4jeaHieipsueZvOeUn++8iVxuICAgICAgZ2FtZVN0YXRlLnNjb3JlID0gTWF0aC5tYXgoMCwgZ2FtZVN0YXRlLnNjb3JlIC0gMSk7XG5cbiAgICAgIGV4cGVjdChnYW1lU3RhdGUuc2NvcmUpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCdUUFMg6KiI566XJywgKCkgPT4ge1xuICAgIHRlc3QoJ1RQUyDmh4noqbLlnKjlkIjnkIbnr4TlnI3lhacnLCAoKSA9PiB7XG4gICAgICAvLyDmqKHmk6wgVFBTIOioiOeul1xuICAgICAgY29uc3QgbW9ja1RQUyA9IDE1LjU7XG4gICAgICBnYW1lU3RhdGUudHBzID0gbW9ja1RQUztcblxuICAgICAgZXhwZWN0KGdhbWVTdGF0ZS50cHMpLnRvQmVHcmVhdGVyVGhhbk9yRXF1YWwoMCk7XG4gICAgICBleHBlY3QoZ2FtZVN0YXRlLnRwcykudG9CZUxlc3NUaGFuKDEwMCk7IC8vIOWQiOeQhueahOS4iumZkFxuICAgIH0pO1xuXG4gICAgdGVzdCgnVFBTIOaHieipsuaUr+aPtOWwj+aVuOm7nueyvuW6picsICgpID0+IHtcbiAgICAgIGNvbnN0IHByZWNpc2VUUFMgPSAxMi43O1xuICAgICAgZ2FtZVN0YXRlLnRwcyA9IHByZWNpc2VUUFM7XG5cbiAgICAgIGV4cGVjdChnYW1lU3RhdGUudHBzKS50b0JlKHByZWNpc2VUUFMpO1xuICAgICAgZXhwZWN0KE51bWJlci5pc0ludGVnZXIoZ2FtZVN0YXRlLnRwcykpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZSgn6YGK5oiy5qih5byPJywgKCkgPT4ge1xuICAgIHRlc3QoJ+aHieipsuaUr+aPtOWWruS6uuaooeW8jycsICgpID0+IHtcbiAgICAgIGdhbWVTdGF0ZS5tb2RlID0gJ3NpbmdsZSc7XG4gICAgICBleHBlY3QoZ2FtZVN0YXRlLm1vZGUpLnRvQmUoJ3NpbmdsZScpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgn5oeJ6Kmy5pSv5o+06ZuZ5Lq65qih5byPJywgKCkgPT4ge1xuICAgICAgZ2FtZVN0YXRlLm1vZGUgPSAnZHVhbCc7XG4gICAgICBleHBlY3QoZ2FtZVN0YXRlLm1vZGUpLnRvQmUoJ2R1YWwnKTtcbiAgICB9KTtcblxuICAgIHRlc3QoJ+S4jeaHieipsuaOpeWPl+eEoeaViOeahOmBiuaIsuaooeW8jycsICgpID0+IHtcbiAgICAgIGNvbnN0IHZhbGlkTW9kZXMgPSBbJ3NpbmdsZScsICdkdWFsJ107XG4gICAgICBjb25zdCB0ZXN0TW9kZSA9ICdpbnZhbGlkJztcblxuICAgICAgaWYgKCF2YWxpZE1vZGVzLmluY2x1ZGVzKHRlc3RNb2RlKSkge1xuICAgICAgICBnYW1lU3RhdGUubW9kZSA9ICdzaW5nbGUnOyAvLyDpoJDoqK3lgLxcbiAgICAgIH1cblxuICAgICAgZXhwZWN0KHZhbGlkTW9kZXMpLnRvQ29udGFpbihnYW1lU3RhdGUubW9kZSk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKCfpgYrmiLLni4DmhYvnrqHnkIYnLCAoKSA9PiB7XG4gICAgdGVzdCgn6YGK5oiy6ZaL5aeL5pmC5oeJ6Kmy6Kit5a6a54K65rS76LqN54uA5oWLJywgKCkgPT4ge1xuICAgICAgZ2FtZVN0YXRlLmlzQWN0aXZlID0gdHJ1ZTtcbiAgICAgIGV4cGVjdChnYW1lU3RhdGUuaXNBY3RpdmUpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG5cbiAgICB0ZXN0KCfpgYrmiLLntZDmnZ/mmYLmh4noqbLoqK3lrprngrrpnZ7mtLvouo3ni4DmhYsnLCAoKSA9PiB7XG4gICAgICBnYW1lU3RhdGUuaXNBY3RpdmUgPSBmYWxzZTtcbiAgICAgIGV4cGVjdChnYW1lU3RhdGUuaXNBY3RpdmUpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuXG4gICAgdGVzdCgn5pmC6ZaT5q246Zu25pmC6YGK5oiy5oeJ6Kmy57WQ5p2fJywgKCkgPT4ge1xuICAgICAgZ2FtZVN0YXRlLnRpbWVMZWZ0ID0gMDtcbiAgICAgIGdhbWVTdGF0ZS5pc0FjdGl2ZSA9IGdhbWVTdGF0ZS50aW1lTGVmdCA+IDA7XG5cbiAgICAgIGV4cGVjdChnYW1lU3RhdGUuaXNBY3RpdmUpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiOztBQUFBO0FBQ0E7QUFDQTtBQUNB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